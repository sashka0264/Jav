**Фазы** - погружение (или захват) и всплытие.

**Отличия e.currentTarget от e.target:** 
* currentTarget указывает на элемент, на котором сработал обработчик.
* target указывает на элемент, на котором сработало событие.

**Отличия e.stopImmediatePropagation от e.stopPropagation:** 
* stopImmediatePropagation прекращает не только всплытие дальше по иерархии, но и отменяет работу всех последующих обработчиков конкретного события на данном элементе.
* stopPropagation прекращает всплытие дальше по иерархии.

Мы можем отлавливать события при погружении, указав 3-м параметром true мы начинаем работать в режиме погружения, а не всплытия. По умолчанию там false.
``x.addEventListener('click', (e) => alert(`Погружение: ${x.tagName}`), true);``

## Всплытие событий
Например, если обработчик 'click' повесить на родителя и кликнуть на его самый глубокий дочерний элемент, то событие 'click' сработает на нем, потом на его родителе и так поднимится до самого html по цепочке предков. Если есть там есть функция, которую можно выполнить, то она помещается в очередь. Если нет, то всплытие происходит дальше. Важно помнить, что не все события всплывают (focus/blur и т.д.).


**За исключением тех событий, которые предназначены для одного элемента и не всплывают (focus/blur и т.д.).** Это позволяет нам использовать **делегирование**. Но довольно часто, это является проблемой, поэтому существует **e.stopPropagation()**, который останавливает всплытие на нужном нам элементе, предотвращая тем самым "поломку" кода.

**Приоритеты задач для Event Loop по убыванию:**
* Микротаски (выполняются примерно в 40 раз быстрее тасок)
* Рендер (нужно ли что-то перерисовать, изменить стили)
* Таски

## Event Loop
Event Loop - это механизм, который наблюдает за основным потоком и очередью коллбэков. Если основной поток пуст, то Event Loop берет первую задачу из очереди, помещая ее в основной поток на выполнение. Рендеринг в браузере может выполняться каждые 16 мс, если основной поток свободен и нужно что-то перерисовать.

1. Подождать, пока освободится основной поток.
2. Поместить все микротаски из очереди в основной поток.
3. Отрисовать изменения страницы, если они есть.
4. Если очередь тасок не пуста, поместить в основной поток таску.
5. Перейти к шагу 1.
